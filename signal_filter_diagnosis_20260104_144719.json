{
  "timestamp": "2026-01-04T14:45:43.236202",
  "diagnostics": {
    "ai_filter_status": {
      "cache_size": 0,
      "cache_timeout": 300,
      "valuation_cache_size": 0,
      "valuation_cache_timeout": 600,
      "xai_available": true,
      "gpt_valuation_available": true,
      "primary_model": "GPT-4o Mini",
      "apis_integrated": {
        "coingecko": true,
        "cryptopanic": true,
        "yfinance": true
      },
      "last_updated": "2026-01-04T14:45:45.205886"
    },
    "thresholds": {
      "filter_threshold": 0.7,
      "weights": {
        "Fear & Greed": 0.15,
        "Volatilidad": 0.15,
        "Momentum": 0.15,
        "IA Híbrida": 0.2,
        "GPT-4o Mini": 0.35
      },
      "max_contributions": {
        "Fear & Greed": 0.15,
        "Volatilidad": 0.15,
        "Momentum": 0.15,
        "IA Híbrida": 0.2,
        "GPT-4o Mini": 0.35
      }
    },
    "test_signals": [
      {
        "signal": {
          "symbol": "BTCUSDT",
          "side": "LONG",
          "entry_price": 45000,
          "confidence": 0.85,
          "strategy": "TREND_FOLLOWING"
        },
        "filtered": false,
        "reason": "Señal permitida (score: 0.52)",
        "analysis": {
          "sentiment_data": {
            "fear_greed": {
              "value": 25,
              "classification": "Extreme Fear",
              "timestamp": "2026-01-04T14:45:45.500399"
            },
            "volatility": {
              "level": 0.8,
              "classification": "High"
            },
            "momentum": {
              "score": 0.6,
              "direction": "Neutral",
              "strength": "Weak"
            },
            "social_sentiment": {
              "available": false,
              "reason": "Análisis falló",
              "error": "Fallback error: 'NexusAnalyst' object has no attribute 'analyze_market_data'"
            },
            "ai_valuation": {
              "available": false,
              "reason": "Valoración falló",
              "error": "Error desconocido",
              "fallback": true
            }
          },
          "ai_analysis": {
            "available": false,
            "should_filter": false,
            "reason": "Análisis falló",
            "error": "Fallback error: 'NexusAnalyst' object has no attribute 'analyze_market_data'"
          },
          "filter_score": 0.515,
          "timestamp": "2026-01-04T14:46:20.820590",
          "symbol": "BTCUSDT"
        }
      },
      {
        "signal": {
          "symbol": "ETHUSDT",
          "side": "SHORT",
          "entry_price": 2800,
          "confidence": 0.78,
          "strategy": "MEAN_REVERSION"
        },
        "filtered": false,
        "reason": "Señal permitida (score: 0.70)",
        "analysis": {
          "sentiment_data": {
            "fear_greed": {
              "value": 25,
              "classification": "Extreme Fear",
              "timestamp": "2026-01-04T14:45:45.500399"
            },
            "volatility": {
              "level": 0.7,
              "classification": "Medium"
            },
            "momentum": {
              "score": 0.6,
              "direction": "Neutral",
              "strength": "Weak"
            },
            "social_sentiment": {
              "available": false,
              "reason": "Análisis falló",
              "error": "Fallback error: 'NexusAnalyst' object has no attribute 'analyze_market_data'"
            },
            "ai_valuation": {
              "available": false,
              "reason": "Valoración falló",
              "error": "Error desconocido",
              "fallback": true
            }
          },
          "ai_analysis": {
            "available": true,
            "should_filter": true,
            "analysis": "**ANÁLISIS DE SEÑAL DE TRADING - ETHUSDT**\n\n**Decisión: SÍ, filtrar la señal.**\n\n**Explicación:**\n1. **Sentimiento del mercado (Fear & Greed Index: 25 - Extreme Fear):** El sentimiento de \"Extreme Fear\" puede ser favorable para un SHORT, ya que indica un mercado bajista. Sin embargo, también aumenta el riesgo de reversión, ya que el pánico extremo a menudo precede a rebotes.\n2. **Volatilidad (Medium):** La volatilidad media es adecuada para operar, ya que no es ni demasiado alta (riesgo excesivo) ni demasiado baja (sin movimiento). Este factor no justifica filtrar la señal.\n3. **Momentum (Neutral - Weak):** El momentum neutral y débil no confirma la dirección SHORT. Sin un impulso bajista claro, la señal carece de soporte técnico.\n4. **Riesgo de reversión (basado en sentimiento):** Con un Fear & Greed Index en \"Extreme Fear\", existe un riesgo significativo de reversión alcista, ya que el mercado podría estar sobrevendido.\n\n**Conclusión:** Aunque la volatilidad es aceptable y el sentimiento podría apoyar un SHORT, el momentum débil y el alto riesgo de reversión debido al \"Extreme Fear\" sugieren que esta señal no es lo suficientemente sólida. Filtrar para evitar falsos movimientos.",
            "confidence": 0.8,
            "provider": "xai"
          },
          "filter_score": 0.6950000000000002,
          "timestamp": "2026-01-04T14:46:51.022724",
          "symbol": "ETHUSDT"
        }
      },
      {
        "signal": {
          "symbol": "SOLUSDT",
          "side": "LONG",
          "entry_price": 120,
          "confidence": 0.82,
          "strategy": "SCALPING"
        },
        "filtered": false,
        "reason": "Señal permitida (score: 0.54)",
        "analysis": {
          "sentiment_data": {
            "fear_greed": {
              "value": 25,
              "classification": "Extreme Fear",
              "timestamp": "2026-01-04T14:45:45.500399"
            },
            "volatility": {
              "level": 0.5,
              "classification": "Low"
            },
            "momentum": {
              "score": 0.6,
              "direction": "Neutral",
              "strength": "Weak"
            },
            "social_sentiment": {
              "available": false,
              "reason": "Análisis falló",
              "error": "Fallback error: 'NexusAnalyst' object has no attribute 'analyze_market_data'"
            },
            "ai_valuation": {
              "available": false,
              "reason": "Valoración falló",
              "error": "Error desconocido",
              "fallback": true
            }
          },
          "ai_analysis": {
            "available": true,
            "should_filter": true,
            "analysis": "**DECISIÓN: SÍ, FILTRAR LA SEÑAL**\n\n**EXPLICACIÓN:**\n1. **Sentimiento del mercado (Fear & Greed Index: 25 - Extreme Fear):** No es favorable para una posición LONG. Un entorno de \"Extreme Fear\" indica alta aversión al riesgo y potencial para caídas adicionales, lo que va en contra de la dirección alcista.\n2. **Volatilidad (Low):** Aunque la baja volatilidad reduce el riesgo de movimientos bruscos, también limita el potencial de ganancias rápidas en una posición LONG, haciendo que la señal sea menos atractiva.\n3. **Momentum (Neutral - Weak):** No confirma la dirección alcista. Un momentum neutral o débil sugiere falta de fuerza para sostener un movimiento al alza.\n4. **Riesgos de reversión:** Sí, el sentimiento de \"Extreme Fear\" aumenta la probabilidad de una reversión o continuación bajista, especialmente en un mercado temeroso.\n\n**ACCIÓN RECOMENDADA:** Evitar entrar en esta posición LONG y esperar condiciones de mercado más favorables (sentimiento neutral o greed, y momentum alcista claro).",
            "confidence": 0.8,
            "provider": "xai"
          },
          "filter_score": 0.5375000000000002,
          "timestamp": "2026-01-04T14:47:19.529795",
          "symbol": "SOLUSDT"
        }
      }
    ],
    "session_defaults": {
      "sentiment_filter": true,
      "ml_mode": true,
      "risk_management": true,
      "max_positions": 5,
      "position_size_pct": 10.0
    }
  },
  "recommendations": [
    {
      "priority": "HIGH",
      "issue": "GPT-4o Mini tiene 35% de peso en el score de filtrado",
      "impact": "Puede estar filtrando muchas señales válidas",
      "solution": "Reducir el peso de GPT-4o Mini al 20-25% y aumentar pesos de factores técnicos"
    },
    {
      "priority": "HIGH",
      "issue": "Umbral de filtrado es 0.7 (muy restrictivo)",
      "impact": "Muchas señales borderline son filtradas",
      "solution": "Aumentar umbral a 0.75-0.8 para permitir más señales"
    },
    {
      "priority": "MEDIUM",
      "issue": "AI Filter activado por defecto en todas las sesiones",
      "impact": "Todas las señales pasan por filtrado restrictivo",
      "solution": "Considerar opción de desactivar AI Filter para usuarios avanzados"
    },
    {
      "priority": "LOW",
      "issue": "Falta logging detallado de por qué se filtran señales",
      "impact": "Difícil diagnosticar problemas de filtrado",
      "solution": "Mejorar logging con breakdown completo del score de filtrado"
    }
  ]
}